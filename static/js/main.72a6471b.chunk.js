(this["webpackJsonpreact-around-auth"]=this["webpackJsonpreact-around-auth"]||[]).push([[0],{31:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(24),c=a.n(r),o=a(8),s=(a(31),a(26)),l=a(5),u=a(2),d=a(3),j=i.a.createContext(),m=a(17),p=a.p+"static/media/header-vector.70737bb4.svg",b=a(0);var f=function(e){var t=e.isHamburgerMenuShown,a=e.isUserLoggedIn,n=e.isCloseBtnShown,i=e.userEmail,r=e.onSignOut,c=e.isUserOnRegistrationPage,s=e.isUserOnLoginPage;return Object(b.jsx)("nav",{className:"nav ".concat(t?"nav_logged-in-mobile-inactive":""),children:Object(b.jsxs)("ul",{className:"nav__items",children:[Object(b.jsxs)("li",{className:"nav__item ".concat(a?"nav__item_active":""," ").concat(n?"nav__item_logged-in-mobile":""),children:[Object(b.jsx)("p",{className:"nav__user-detail",children:i}),Object(b.jsx)(o.b,{to:"#",className:"nav__link",onClick:r,children:"Log out"})]}),Object(b.jsx)("li",{className:"nav__item ".concat(!a&&c?"nav__item_active":""),children:Object(b.jsx)(o.b,{to:"/signin",className:"nav__link",children:"Log in"})}),Object(b.jsx)("li",{className:"nav__item ".concat(!a&&s?"nav__item_active":""),children:Object(b.jsx)(o.b,{to:"/signup",className:"nav__link",children:"Sign up"})})]})})};var _=function(e){var t=e.isUserLoggedIn,a=Object(m.a)(e,["isUserLoggedIn"]),n=i.a.useState(!1),r=Object(u.a)(n,2),c=r[0],o=r[1],s=!c&&t,d=c&&t;function j(){o(!c)}return Object(b.jsxs)("header",{className:"header ".concat(t?"header_logged-in-mobile":""),children:[Object(b.jsxs)("div",{className:"header__wrapper ".concat(t?"header__wrapper_logged-in-mobile":""),children:[Object(b.jsx)("img",{src:p,alt:"Around The U.S.",className:"header__vector"}),Object(b.jsxs)("div",{className:"header__hamburger-menu ".concat(s?"header__hamburger-menu_active":""),onClick:j,children:[Object(b.jsx)("div",{className:"header__hamburger-menu-line"}),Object(b.jsx)("div",{className:"header__hamburger-menu-line"}),Object(b.jsx)("div",{className:"header__hamburger-menu-line"})]}),Object(b.jsx)("button",{className:"header__nav-close-btn ".concat(d?"header__nav-close-btn_active":""),onClick:j})]}),Object(b.jsx)(f,Object(l.a)({isUserLoggedIn:t,isMobileNavOpen:c,isCloseBtnShown:d,isHamburgerMenuShown:s},a))]})};var h=function(e){var t=e.card,a=e.onCardSelect,n=e.onCardLike,r=e.onCardDelete,c=i.a.useContext(j),o=t.likes.length,s=t.owner._id===c._id,l=t.likes.some((function(e){return e._id===c._id})),u="location__delete-btn"+(s?" location__delete-btn_active":""),d="location__like-btn"+(l?" location__like-btn_active":"");return Object(b.jsxs)("li",{className:"location",children:[Object(b.jsx)("button",{type:"button","aria-label":"Delete",className:u,onClick:function(){r(t._id)}}),Object(b.jsx)("img",{src:t.link,alt:t.name,className:"location__image",onClick:function(){a(t._id,t.name,t.link)}}),Object(b.jsxs)("div",{className:"location__content-wrapper",children:[Object(b.jsx)("h2",{className:"location__name",children:t.name}),Object(b.jsxs)("div",{className:"location__likes-wrapper",children:[Object(b.jsx)("button",{type:"button","aria-label":"Like",className:d,onClick:function(){n(t._id,l)}}),Object(b.jsx)("p",{className:"location__num-likes",children:o})]})]})]})};var O=function(e){var t=e.onEditAvatar,a=e.onAddPlace,n=e.onEditProfile,r=e.onCardSelect,c=e.onCardLike,o=e.onCardDelete,s=e.cards,l=i.a.useContext(j);return Object(b.jsxs)("main",{className:"main-content",children:[Object(b.jsxs)("section",{className:"profile",children:[Object(b.jsxs)("div",{className:"profile__avatar-wrapper",children:[Object(b.jsx)("img",{src:l.avatar,alt:"profile avatar",className:"profile__avatar"}),Object(b.jsx)("div",{className:"profile__avatar-overlay",onClick:t})]}),Object(b.jsxs)("div",{className:"profile__info",children:[Object(b.jsx)("h1",{className:"profile__name",children:l.name}),Object(b.jsx)("button",{type:"button","aria-label":"Edit",className:"profile__edit-btn",onClick:n}),Object(b.jsx)("p",{className:"profile__self-description",children:l.about})]}),Object(b.jsx)("button",{type:"button","aria-label":"Add location",className:"profile__add-btn",onClick:a})]}),Object(b.jsx)("section",{className:"locations",children:Object(b.jsx)("ul",{className:"locations__collection",children:s.map((function(e){var t=e.name,a=e.link,n=e.likes,i=e._id,s=e.owner;return Object(b.jsx)(h,{card:{name:t,link:a,likes:n,_id:i,owner:s},onCardSelect:r,onCardLike:c,onCardDelete:o},i)}))})})]})};var v=function(e){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Around The U.S."})})};var g=function(e){var t=e.name,a=e.children,n=e.isOpen,i=e.onClose,r=e.additionalCssClassesStr,c=void 0===r?"":r,o="overlay_opened";return Object(b.jsx)("div",{className:"overlay ".concat(c," ").concat(n?o:""),onClick:function(e){e.target.classList.contains(o)&&i()},children:Object(b.jsxs)("div",{className:"overlay__wrapper",children:[Object(b.jsx)("button",{type:"button","aria-label":"Close",className:"overlay__close-btn overlay__close-btn_type_".concat(t),onClick:i}),a]})})};var x=function(e){var t=e.card,a=e.onClose;return Object(b.jsx)(g,{name:"image-popup",isOpen:null!=t._id,onClose:a,additionalCssClassesStr:"overlay_dark",children:Object(b.jsxs)("figure",{className:"image-popup",children:[Object(b.jsx)("img",{src:t.link,alt:t.name,className:"image-popup__image"}),Object(b.jsx)("figcaption",{className:"image-popup__title",children:t.name})]})})};function C(e){console.log("Error: ".concat(e))}function N(e,t){var a=Object(l.a)({},e);return t.validity.valid?delete a[t.name]:a[t.name]=t.validationMessage,a}function S(e,t,a){var n="project-form__input-error";return n+" ".concat(n,"_field_").concat(t)+(null!=e[t]&&a?" ".concat(n,"_active"):"")}var y=function(e){var t=e.name,a=e.title,n=e.submitBtnClassName,i=e.isSubmitBtnDisabled,r=e.submitBtnText,c=e.onSubmit,o=e.children;return Object(b.jsxs)("form",{name:t,className:"project-form project-form_type_".concat(t),onSubmit:c,noValidate:!0,children:[Object(b.jsx)("h3",{className:"project-form__title project-form__title_type_".concat(t),children:a}),o,Object(b.jsx)("button",{type:"submit",className:n,disabled:i,children:r||"Submit"})]})};var k=function(e){var t=e.name,a=e.title,n=e.children,i=e.isOpen,r=e.onClose,c=e.onSubmit,o=e.isSubmitBtnDisabled,s=e.submitBtnText,l="project-form__submit-btn project-form__submit-btn_type_".concat(t)+(o?" project-form__submit-btn_disabled":"");return Object(b.jsx)(g,{name:t,isOpen:i,onClose:r,children:Object(b.jsx)(y,{name:t,title:a,submitBtnText:s,submitBtnClassName:l,isSubmitBtnDisabled:o,onSubmit:c,children:n})})};var P=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,r=e.isUpdatingProfile,c=i.a.useState(""),o=Object(u.a)(c,2),s=o[0],l=o[1],d=i.a.useState(""),m=Object(u.a)(d,2),p=m[0],f=m[1],_=i.a.useState({}),h=Object(u.a)(_,2),O=h[0],v=h[1],g=i.a.useState(!1),x=Object(u.a)(g,2),C=x[0],y=x[1],P=i.a.useContext(j),w="profile-name",B="profile-description",L=S(O,w,t),U=S(O,B,t);function T(){var e=s.length<2||s.length>40||p.length<2||p.length>200;y(r||e||!t)}function E(e){var t=e.target;v(N(O,t)),T()}return i.a.useEffect((function(){l(P.name),f(P.about)}),[P]),i.a.useEffect((function(){T()}),[s,p,r,t]),Object(b.jsxs)(k,{name:"profile-edit",title:"Edit profile",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s,p)},isSubmitBtnDisabled:C,submitBtnText:r?"Saving":"Save",children:[Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_profile-edit",children:[Object(b.jsx)("input",{type:"text","aria-label":"Name",name:w,className:"project-form__input project-form__input_type_profile-edit-field",placeholder:"Name",minLength:2,maxLength:40,value:s,onChange:function(e){var t=e.target;l(t.value),v(N(O,t))},onBlur:E,required:!0}),Object(b.jsx)("p",{className:L,children:O[w]})]}),Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_profile-edit",children:[Object(b.jsx)("input",{type:"text","aria-label":"About me",name:B,className:"project-form__input project-form__input_type_profile-edit-field",placeholder:"About me",minLength:2,maxLength:200,value:p,onChange:function(e){var t=e.target;f(t.value),v(N(O,t))},onBlur:E,required:!0}),Object(b.jsx)("p",{className:U,children:O[B]})]})]})};var w=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,r=e.isUpdatingAvatar,c=i.a.useState(""),o=Object(u.a)(c,2),s=o[0],l=o[1],d=i.a.useState({}),j=Object(u.a)(d,2),m=j[0],p=j[1];i.a.useEffect((function(){l(""),p({})}),[t]);var f="profile-avatar",_=S(m,f,t),h=m.hasOwnProperty(f),O=""===s||r||h||!t;function v(e){p(N(m,e))}return Object(b.jsx)(k,{name:"profile-img-change",title:"Change profile picture",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s)},isSubmitBtnDisabled:O,submitBtnText:r?"Saving":"Save",children:Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_profile-img-change",children:[Object(b.jsx)("input",{type:"url","aria-label":"Avatar link",name:f,className:"project-form__input project-form__input_type_profile-img-change-field",placeholder:"Avatar link",value:s,onChange:function(e){var t=e.target;l(t.value),v(t)},onBlur:function(e){v(e.target)},required:!0}),Object(b.jsx)("p",{className:_,children:m["profile-avatar"]})]})})};var B=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,r=e.isCreatingPlace,c=i.a.useState(""),o=Object(u.a)(c,2),s=o[0],l=o[1],d=i.a.useState(""),j=Object(u.a)(d,2),m=j[0],p=j[1],f=i.a.useState({}),_=Object(u.a)(f,2),h=_[0],O=_[1];i.a.useEffect((function(){l(""),p(""),O({})}),[t]);var v={placeTitle:"location-title",placeLink:"location-link"},g=Object.keys(v).reduce((function(e,a){var n=S(h,v[a],t);return e[a]=n,e}),{}),x=Object.keys(h).length>0,C=""===s||""===m||r||x||!t;function y(e){O(N(h,e))}function P(e){y(e.target)}return Object(b.jsxs)(k,{name:"location-create",title:"New place",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s,m)},isSubmitBtnDisabled:C,submitBtnText:r?"Saving":"Save",children:[Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_location-create",children:[Object(b.jsx)("input",{type:"text","aria-label":"Title",name:v.placeTitle,className:"project-form__input project-form__input_type_location-create-field",placeholder:"Title",minLength:"2",maxLength:"30",value:s,onChange:function(e){var t=e.target;l(t.value),y(t)},onBlur:P,required:!0}),Object(b.jsx)("p",{className:g.placeTitle,children:h[v.placeTitle]})]}),Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_location-create",children:[Object(b.jsx)("input",{type:"url","aria-label":"Image link",name:v.placeLink,className:"project-form__input project-form__input_type_location-create-field",placeholder:"Image link",value:m,onChange:function(e){var t=e.target;p(t.value),y(t)},onBlur:P,required:!0}),Object(b.jsx)("p",{className:g.placeLink,children:h[v.placeLink]})]})]})};var L=function(e){var t=e.isOpen,a=e.onClose,n=e.onConfirmation,i=e.isDeletingAfterConfirming;return Object(b.jsx)(k,{name:"confirmation-prompt",title:"Are you sure?",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n()},isSubmitBtnDisabled:i||!t,submitBtnText:"Yes"})},U=a(11),T=a(12),E=a(18),D=a(16),A=function(){function e(t){var a=t.baseUrl,n=t.headers,i=void 0===n?{}:n;Object(U.a)(this,e),this._baseUrl=a,this._headers=i}return Object(T.a)(e,[{key:"fetchData",value:function(e){var t=e.relativePathFromBase,a=e.method,n=void 0===a?"GET":a,i=e.additionalHeaderProps,r=void 0===i?{}:i,c=e.body,o=void 0===c?null:c,s={method:n,headers:Object(l.a)(Object(l.a)({},this._headers),r)};null!==o&&(s.body=o);var u="".concat(this._baseUrl,"/").concat(t);return fetch(u,s).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}}]),e}(),I=new(function(e){Object(E.a)(a,e);var t=Object(D.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"getInitialCards",value:function(){return this.fetchData({relativePathFromBase:"cards"})}},{key:"getUserProfile",value:function(){return this.fetchData({relativePathFromBase:"users/me"})}},{key:"createCard",value:function(e,t){return this.fetchData({relativePathFromBase:"cards",method:"POST",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}},{key:"updateUserProfile",value:function(e,t){return this.fetchData({relativePathFromBase:"users/me",method:"PATCH",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}},{key:"deleteCard",value:function(e){return this.fetchData({relativePathFromBase:"cards/".concat(e),method:"DELETE"})}},{key:"updateUserAvatar",value:function(e){return this.fetchData({relativePathFromBase:"users/me/avatar",method:"PATCH",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}},{key:"updateCardLikes",value:function(e,t){return this.fetchData({relativePathFromBase:"cards/likes/".concat(e),method:t?"PUT":"DELETE"})}}]),a}(A))({baseUrl:"https://around.nomoreparties.co/v1/group-8",headers:{authorization:"f9c51bc0-ecec-42b1-bdb4-bcfabdba3e4f"}}),F=new(function(e){Object(E.a)(a,e);var t=Object(D.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"signup",value:function(e,t){return this.fetchData({relativePathFromBase:"signup",method:"POST",body:JSON.stringify({email:e,password:t})})}},{key:"signin",value:function(e,t){return this.fetchData({relativePathFromBase:"signin",method:"POST",body:JSON.stringify({email:e,password:t})})}},{key:"getEmail",value:function(e){return this.fetchData({relativePathFromBase:"users/me",additionalHeaderProps:{Authorization:"Bearer ".concat(e)}})}}]),a}(A))({baseUrl:"https://register.nomoreparties.co",headers:{"Content-Type":"application/json"}}),H=a.p+"static/media/profile-avatar.5a8c9959.jpg";var q=function(e){var t=e.name,a=e.title,n=e.submitBtnText,r=e.onUserAuth,c=e.redirectionInfo,o=e.isProcessing,s=i.a.useState(""),l=Object(u.a)(s,2),d=l[0],j=l[1],m=i.a.useState(""),p=Object(u.a)(m,2),f=p[0],_=p[1],h=i.a.useState({}),O=Object(u.a)(h,2),v=O[0],g=O[1],x="user-email",C="user-password",k=S(v,x,!0),P=S(v,C,!0),w=Object.keys(v).length>0||o||""===d||""===f,B="project-form__submit-btn project-form__submit-btn_type_".concat(t)+(w?" project-form__submit-btn_disabled":"");function L(e){g(N(v,e))}function U(e){L(e.target)}return Object(b.jsxs)("main",{className:"project-user-auth-form-container",children:[Object(b.jsxs)(y,{name:t,title:a,submitBtnText:n,submitBtnClassName:B,isSubmitBtnDisabled:w,onSubmit:function(e){e.preventDefault(),r(d,f)},children:[Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_user-auth",children:[Object(b.jsx)("input",{type:"email","aria-label":"Email",name:x,className:"project-form__input project-form__input_type_user-auth-field",placeholder:"Email",value:d,onChange:function(e){var t=e.target;j(t.value),L(t)},onBlur:U,required:!0}),Object(b.jsx)("p",{className:k,children:v[x]})]}),Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_user-auth",children:[Object(b.jsx)("input",{type:"password","aria-label":"Password",name:C,className:"project-form__input project-form__input_type_user-auth-field",placeholder:"Password",value:f,onChange:function(e){var t=e.target;_(t.value),L(t)},onBlur:U,required:!0}),Object(b.jsx)("p",{className:P,children:v[C]})]})]}),Object(b.jsx)("p",{className:"project-user-auth-form-container__redirection-info",children:c})]})};var J=function(e){var t=e.onRegister,a=e.isRegistering,n=e.setUserIsOnRegistrationPage;i.a.useEffect((function(){return n(!0),function(){return n(!1)}}),[]);var r=Object(b.jsxs)(b.Fragment,{children:["Already a member? Log in "," ",Object(b.jsx)(o.b,{to:"/signin",className:"project-user-auth-form-container__link",children:"here"}),"!"]});return Object(b.jsx)(q,{name:"user-auth",title:"Sign up",submitBtnText:a?"Signing up":"Sign up",redirectionInfo:r,isProcessing:a,onUserAuth:t})};var R=function(e){var t=e.iconType,a=e.description,n=e.isOpen,i=e.onClose;return Object(b.jsx)(g,{name:"registration",isOpen:n,onClose:i,children:Object(b.jsxs)("div",{className:"info-tooltip",children:[Object(b.jsx)("div",{className:"info-tooltip__icon info-tooltip__icon_type_".concat(t)}),Object(b.jsx)("p",{className:"info-tooltip__description",children:a})]})})};var M=function(e){var t=e.isLoggingIn,a=e.onLogin,n=e.setUserIsOnLoginPage;i.a.useEffect((function(){return n(!0),function(){return n(!1)}}),[]);var r=Object(b.jsxs)(b.Fragment,{children:["Not a member yet? Sign up "," ",Object(b.jsx)(o.b,{to:"/signup",className:"project-user-auth-form-container__link",children:"here"}),"!"]});return Object(b.jsx)(q,{name:"user-auth",title:"Log in",submitBtnText:t?"Logging in":"Log in",isProcessing:t,redirectionInfo:r,onUserAuth:a})};var z=function(e){var t=e.Component,a=Object(m.a)(e,["Component"]),n=a.path,i=a.isLoggedIn;return Object(b.jsx)(d.b,{path:n,children:function(){return i?Object(b.jsx)(t,Object(l.a)({},a)):Object(b.jsx)(d.a,{to:"/signin"})}})};var Y=function(){var e=i.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],r=i.a.useState(!1),c=Object(u.a)(r,2),o=c[0],m=c[1],p=i.a.useState(!1),f=Object(u.a)(p,2),h=f[0],g=f[1],N=i.a.useState({_id:null,link:"#",name:""}),S=Object(u.a)(N,2),y=S[0],k=S[1],U=i.a.useState({name:"Jacques Cousteau",about:"Explorer",avatar:H,_id:null}),T=Object(u.a)(U,2),E=T[0],D=T[1],A=i.a.useState([]),q=Object(u.a)(A,2),Y=q[0],G=q[1],V=i.a.useState(null),K=Object(u.a)(V,2),Q=K[0],W=K[1],X=i.a.useState(!1),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=i.a.useState(!1),ae=Object(u.a)(te,2),ne=ae[0],ie=ae[1],re=i.a.useState(!1),ce=Object(u.a)(re,2),oe=ce[0],se=ce[1],le=i.a.useState(!1),ue=Object(u.a)(le,2),de=ue[0],je=ue[1],me=i.a.useState(""),pe=Object(u.a)(me,2),be=pe[0],fe=pe[1],_e=i.a.useState(!1),he=Object(u.a)(_e,2),Oe=he[0],ve=he[1],ge=i.a.useState(!1),xe=Object(u.a)(ge,2),Ce=xe[0],Ne=xe[1],Se=i.a.useState(!1),ye=Object(u.a)(Se,2),ke=ye[0],Pe=ye[1],we=i.a.useState(!1),Be=Object(u.a)(we,2),Le=Be[0],Ue=Be[1],Te=i.a.useState(!1),Ee=Object(u.a)(Te,2),De=Ee[0],Ae=Ee[1],Ie=i.a.useState(!1),Fe=Object(u.a)(Ie,2),He=Fe[0],qe=Fe[1],Je=i.a.useState(!1),Re=Object(u.a)(Je,2),Me=Re[0],ze=Re[1],Ye=h||a||o||Q||y._id||Ce||Oe,Ge=Object(d.g)();function Ve(){g(!1),n(!1),m(!1),W(null),k(Object(l.a)(Object(l.a)({},y),{},{_id:null})),ve(!1),Ne(!1)}function Ke(e){"Escape"===e.key&&Ve()}function Qe(e,t){return He?Object(b.jsx)(d.a,{to:"/"}):Object(b.jsx)(e,Object(l.a)({},t))}return i.a.useEffect((function(){Ye?document.addEventListener("keydown",Ke):document.removeEventListener("keydown",Ke)}),[Ye]),i.a.useEffect((function(){I.getUserProfile().then(D).catch(C)}),[]),i.a.useEffect((function(){I.getInitialCards().then(G).catch(C)}),[]),i.a.useEffect((function(){var e=localStorage.getItem("jwt");e&&(qe(!0),F.getEmail(e).then((function(e){var t=e.data.email;return fe(t)})).catch(C))}),[]),Object(b.jsx)(j.Provider,{value:E,children:Object(b.jsxs)("div",{className:"page",children:[Object(b.jsx)(_,{isUserLoggedIn:He,userEmail:be,isUserOnLoginPage:Me,isUserOnRegistrationPage:Le,onSignOut:function(){localStorage.removeItem("jwt"),qe(!1),fe(""),Ge.push("/signin")}}),Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{path:"/signin",children:Qe(M,{onLogin:function(e,t){Ae(!0),F.signin(e,t).then((function(t){var a=t.token;localStorage.setItem("jwt",a),fe(e),qe(!0),Ge.push("/")})).catch((function(e){C(e)})).finally((function(){return Ae(!1)}))},isLoggingIn:De,setUserIsOnLoginPage:ze})}),Object(b.jsx)(d.b,{path:"/signup",children:Qe(J,{onRegister:function(e,t){Pe(!0),F.signup(e,t).then((function(e){Ne(!0),Ge.push("/signin")})).catch((function(e){C(e),ve(!0)})).finally((function(){return Pe(!1)}))},isRegistering:ke,setUserIsOnRegistrationPage:Ue})}),Object(b.jsx)(z,{Component:O,path:"/",isLoggedIn:He,onEditAvatar:function(){g(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){m(!0)},onCardDelete:function(e){W(e)},onCardSelect:function(e,t,a){k({_id:e,name:t,link:a})},onCardLike:function(e,t){I.updateCardLikes(e,!t).then((function(t){var a=Y.map((function(a){return a._id===e?t:a}));G(a)})).catch(C)},cards:Y})]}),Object(b.jsx)(v,{}),He&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{isOpen:a,onClose:Ve,onUpdateUser:function(e,t){ie(!0),I.updateUserProfile(e,t).then((function(e){D(e),Ve()})).catch(C).finally((function(){return ie(!1)}))},isUpdatingProfile:ne}),Object(b.jsx)(B,{isOpen:o,onClose:Ve,onAddPlace:function(e,t){se(!0),I.createCard(e,t).then((function(e){G([e].concat(Object(s.a)(Y))),Ve()})).catch(C).finally((function(){return se(!1)}))},isCreatingPlace:oe}),Object(b.jsx)(L,{isOpen:null!==Q,onClose:Ve,onConfirmation:function(){je(!0),I.deleteCard(Q).then((function(e){console.log("returned:",e);var t=Y.filter((function(e){return e._id!==Q}));G(t),Ve()})).catch(C).finally((function(){return je(!1)}))},isDeletingAfterConfirming:de}),Object(b.jsx)(w,{isOpen:h,onClose:Ve,onUpdateAvatar:function(e){ee(!0),I.updateUserAvatar(e).then((function(e){D(e),Ve()})).catch(C).finally((function(){return ee(!1)}))},isUpdatingAvatar:$}),Object(b.jsx)(x,{card:y,onClose:Ve})]}),Object(b.jsx)(R,{iconType:"success",description:"Success! You have now been registered.",isOpen:Ce,onClose:Ve}),Object(b.jsx)(R,{iconType:"error",description:"Oops, something went wrong! Please try again.",isOpen:Oe,onClose:Ve})]})})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),r(e),c(e)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(o.a,{basename:"/iwterry/react-around-auth",children:Object(b.jsx)(Y,{})})}),document.getElementById("root")),G()}},[[38,1,2]]]);
//# sourceMappingURL=main.72a6471b.chunk.js.map