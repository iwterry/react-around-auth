(this["webpackJsonpreact-around-auth"]=this["webpackJsonpreact-around-auth"]||[]).push([[0],{31:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(24),c=a.n(r),o=a(8),s=(a(31),a(26)),l=a(5),u=a(2),d=a(3),m=i.a.createContext(),j=a(17),p=a.p+"static/media/header-vector.70737bb4.svg",b=a(0);var f=function(e){var t=e.isHamburgerMenuShown,a=e.isUserLoggedIn,n=e.isCloseBtnShown,i=e.userEmail,r=e.onSignOut,c=e.isUserOnRegistrationPage,s=e.isUserOnLoginPage;return Object(b.jsx)("nav",{className:"nav ".concat(t?"nav_logged-in-mobile-inactive":""),children:Object(b.jsxs)("ul",{className:"nav__items",children:[Object(b.jsxs)("li",{className:"nav__item ".concat(a?"nav__item_active":""," ").concat(n?"nav__item_logged-in-mobile":""),children:[Object(b.jsx)("p",{className:"nav__user-detail",children:i}),Object(b.jsx)(o.b,{to:"#",className:"nav__link",onClick:r,children:"Log out"})]}),Object(b.jsx)("li",{className:"nav__item ".concat(!a&&c?"nav__item_active":""),children:Object(b.jsx)(o.b,{to:"/signin",className:"nav__link",children:"Log in"})}),Object(b.jsx)("li",{className:"nav__item ".concat(!a&&s?"nav__item_active":""),children:Object(b.jsx)(o.b,{to:"/signup",className:"nav__link",children:"Sign up"})})]})})};var _=function(e){var t=e.isUserLoggedIn,a=Object(j.a)(e,["isUserLoggedIn"]),n=i.a.useState(!1),r=Object(u.a)(n,2),c=r[0],o=r[1],s=!c&&t,d=c&&t;function m(){o(!c)}return Object(b.jsxs)("header",{className:"header ".concat(t?"header_logged-in-mobile":""),children:[Object(b.jsxs)("div",{className:"header__wrapper ".concat(t?"header__wrapper_logged-in-mobile":""),children:[Object(b.jsx)("img",{src:p,alt:"Around The U.S.",className:"header__vector"}),Object(b.jsxs)("div",{className:"header__hamburger-menu ".concat(s?"header__hamburger-menu_active":""),onClick:m,children:[Object(b.jsx)("div",{className:"header__hamburger-menu-line"}),Object(b.jsx)("div",{className:"header__hamburger-menu-line"}),Object(b.jsx)("div",{className:"header__hamburger-menu-line"})]}),Object(b.jsx)("button",{className:"header__nav-close-btn ".concat(d?"header__nav-close-btn_active":""),onClick:m})]}),Object(b.jsx)(f,Object(l.a)({isUserLoggedIn:t,isMobileNavOpen:c,isCloseBtnShown:d,isHamburgerMenuShown:s},a))]})};var h=function(e){var t=e.card,a=e.onCardSelect,n=e.onCardLike,r=e.onCardDelete,c=i.a.useContext(m),o=t.likes.length,s=t.owner._id===c._id,l=t.likes.some((function(e){return e._id===c._id})),u="location__delete-btn"+(s?" location__delete-btn_active":""),d="location__like-btn"+(l?" location__like-btn_active":"");return Object(b.jsxs)("li",{className:"location",children:[Object(b.jsx)("button",{type:"button","aria-label":"Delete",className:u,onClick:function(){r(t._id)}}),Object(b.jsx)("img",{src:t.link,alt:t.name,className:"location__image",onClick:function(){a(t._id,t.name,t.link)}}),Object(b.jsxs)("div",{className:"location__content-wrapper",children:[Object(b.jsx)("h2",{className:"location__name",children:t.name}),Object(b.jsxs)("div",{className:"location__likes-wrapper",children:[Object(b.jsx)("button",{type:"button","aria-label":"Like",className:d,onClick:function(){n(t._id,l)}}),Object(b.jsx)("p",{className:"location__num-likes",children:o})]})]})]})};var g=function(e){var t=e.onEditAvatar,a=e.onAddPlace,n=e.onEditProfile,r=e.onCardSelect,c=e.onCardLike,o=e.onCardDelete,s=e.cards,l=i.a.useContext(m);return Object(b.jsxs)("main",{className:"main-content",children:[Object(b.jsxs)("section",{className:"profile",children:[Object(b.jsxs)("div",{className:"profile__avatar-wrapper",children:[Object(b.jsx)("img",{src:l.avatar,alt:"profile avatar",className:"profile__avatar"}),Object(b.jsx)("div",{className:"profile__avatar-overlay",onClick:t})]}),Object(b.jsxs)("div",{className:"profile__info",children:[Object(b.jsx)("h1",{className:"profile__name",children:l.name}),Object(b.jsx)("button",{type:"button","aria-label":"Edit",className:"profile__edit-btn",onClick:n}),Object(b.jsx)("p",{className:"profile__self-description",children:l.about})]}),Object(b.jsx)("button",{type:"button","aria-label":"Add location",className:"profile__add-btn",onClick:a})]}),Object(b.jsx)("section",{className:"locations",children:Object(b.jsx)("ul",{className:"locations__collection",children:s.map((function(e){var t=e.name,a=e.link,n=e.likes,i=e._id,s=e.owner;return Object(b.jsx)(h,{card:{name:t,link:a,likes:n,_id:i,owner:s},onCardSelect:r,onCardLike:c,onCardDelete:o},i)}))})})]})};var O=function(e){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Around The U.S."})})};var v=function(e){var t=e.name,a=e.children,n=e.isOpen,i=e.onClose,r=e.additionalCssClassesStr,c=void 0===r?"":r,o="overlay_opened";return Object(b.jsx)("div",{className:"overlay ".concat(c," ").concat(n?o:""),onClick:function(e){e.target.classList.contains(o)&&i()},children:Object(b.jsxs)("div",{className:"overlay__wrapper",children:[Object(b.jsx)("button",{type:"button","aria-label":"Close",className:"overlay__close-btn overlay__close-btn_type_".concat(t),onClick:i}),a]})})};var x=function(e){var t=e.card,a=e.onClose;return Object(b.jsx)(v,{name:"image-popup",isOpen:null!=t._id,onClose:a,additionalCssClassesStr:"overlay_dark",children:Object(b.jsxs)("figure",{className:"image-popup",children:[Object(b.jsx)("img",{src:t.link,alt:t.name,className:"image-popup__image"}),Object(b.jsx)("figcaption",{className:"image-popup__title",children:t.name})]})})};function C(e){console.log("Error: ".concat(e))}function S(e,t){var a=Object(l.a)({},e);return t.validity.valid?delete a[t.name]:a[t.name]=t.validationMessage,a}function N(e,t,a){var n="project-form__input-error";return n+" ".concat(n,"_field_").concat(t)+(null!=e[t]&&a?" ".concat(n,"_active"):"")}var y=function(e){var t=e.name,a=e.title,n=e.submitBtnClassName,i=e.isSubmitBtnDisabled,r=e.submitBtnText,c=e.onSubmit,o=e.children;return Object(b.jsxs)("form",{name:t,className:"project-form project-form_type_".concat(t),onSubmit:c,noValidate:!0,children:[Object(b.jsx)("h3",{className:"project-form__title project-form__title_type_".concat(t),children:a}),o,Object(b.jsx)("button",{type:"submit",className:n,disabled:i,children:r||"Submit"})]})};var k=function(e){var t=e.name,a=e.title,n=e.children,i=e.isOpen,r=e.onClose,c=e.onSubmit,o=e.isSubmitBtnDisabled,s=e.submitBtnText,l="project-form__submit-btn project-form__submit-btn_type_".concat(t)+(o?" project-form__submit-btn_disabled":"");return Object(b.jsx)(v,{name:t,isOpen:i,onClose:r,children:Object(b.jsx)(y,{name:t,title:a,submitBtnText:s,submitBtnClassName:l,isSubmitBtnDisabled:o,onSubmit:c,children:n})})};var P=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,r=e.isUpdatingProfile,c=i.a.useState(""),o=Object(u.a)(c,2),s=o[0],l=o[1],d=i.a.useState(""),j=Object(u.a)(d,2),p=j[0],f=j[1],_=i.a.useState({}),h=Object(u.a)(_,2),g=h[0],O=h[1],v=i.a.useState(!1),x=Object(u.a)(v,2),C=x[0],y=x[1],P=i.a.useContext(m),w="profile-name",L="profile-description",B=N(g,w,t),D=N(g,L,t);function E(){var e=s.length<2||s.length>40||p.length<2||p.length>200;y(r||e||!t)}function T(e){var t=e.target;switch(t.name){case w:l(t.value);break;case L:f(t.value)}O(S(g,t))}function U(e){var t=e.target;O(S(g,t)),E()}return i.a.useEffect((function(){l(P.name),f(P.about)}),[P]),i.a.useEffect((function(){E()}),[s,p,r,t]),Object(b.jsxs)(k,{name:"profile-edit",title:"Edit profile",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s,p)},isSubmitBtnDisabled:C,submitBtnText:r?"Saving":"Save",children:[Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_profile-edit",children:[Object(b.jsx)("input",{type:"text","aria-label":"Name",name:w,className:"project-form__input project-form__input_type_profile-edit-field",placeholder:"Name",minLength:2,maxLength:40,value:s,onChange:T,onBlur:U,required:!0}),Object(b.jsx)("p",{className:B,children:g[w]})]}),Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_profile-edit",children:[Object(b.jsx)("input",{type:"text","aria-label":"About me",name:L,className:"project-form__input project-form__input_type_profile-edit-field",placeholder:"About me",minLength:2,maxLength:200,value:p,onChange:T,onBlur:U,required:!0}),Object(b.jsx)("p",{className:D,children:g[L]})]})]})};var w=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,r=e.isUpdatingAvatar,c=i.a.useState(""),o=Object(u.a)(c,2),s=o[0],l=o[1],d=i.a.useState({}),m=Object(u.a)(d,2),j=m[0],p=m[1],f=i.a.useState(!1),_=Object(u.a)(f,2),h=_[0],g=_[1],O="profile-avatar",v=N(j,O,t),x=j.hasOwnProperty(O),C=!h||r||x||!t;function y(e){p(S(j,e)),l(e.value)}return Object(b.jsx)(k,{name:"profile-img-change",title:"Change profile picture",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s),l("")},isSubmitBtnDisabled:C,submitBtnText:r?"Saving":"Save",children:Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_profile-img-change",children:[Object(b.jsx)("input",{type:"url","aria-label":"Avatar link",name:O,className:"project-form__input project-form__input_type_profile-img-change-field",placeholder:"Avatar link",value:s,onChange:function(e){var t=e.target;l(t.value),y(t),g(!0)},onBlur:function(e){y(e.target)},required:!0}),Object(b.jsx)("p",{className:v,children:j["profile-avatar"]})]})})};var L=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,r=e.isCreatingPlace,c=i.a.useState(""),o=Object(u.a)(c,2),s=o[0],l=o[1],d=i.a.useState(""),m=Object(u.a)(d,2),j=m[0],p=m[1],f=i.a.useState({}),_=Object(u.a)(f,2),h=_[0],g=_[1],O=i.a.useState(!1),v=Object(u.a)(O,2),x=v[0],C=v[1],y="location-title",P="location-link",w=N(h,y,t),L=N(h,P,t),B=h.hasOwnProperty(y)||h.hasOwnProperty(P),D=!x||r||B||!t;function E(e){var t=e.target;switch(t.name){case y:l(t.value);break;case P:p(t.value)}C(!0)}function T(e){!function(e){g(S(h,e))}(e.target)}return Object(b.jsxs)(k,{name:"location-create",title:"New place",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(s,j),l(""),p("")},isSubmitBtnDisabled:D,submitBtnText:r?"Saving":"Save",children:[Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_location-create",children:[Object(b.jsx)("input",{type:"text","aria-label":"Title",name:y,className:"project-form__input project-form__input_type_location-create-field",placeholder:"Title",minLength:"2",maxLength:"30",value:s,onChange:E,onBlur:T,required:!0}),Object(b.jsx)("p",{className:w,children:h[y]})]}),Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_location-create",children:[Object(b.jsx)("input",{type:"url","aria-label":"Image link",name:P,className:"project-form__input project-form__input_type_location-create-field",placeholder:"Image link",value:j,onChange:E,onBlur:T,required:!0}),Object(b.jsx)("p",{className:L,children:h[P]})]})]})};var B=function(e){var t=e.isOpen,a=e.onClose,n=e.onConfirmation,i=e.isDeletingAfterConfirming;return Object(b.jsx)(k,{name:"confirmation-prompt",title:"Are you sure?",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n()},isSubmitBtnDisabled:i||!t,submitBtnText:"Yes"})},D=a(11),E=a(12),T=a(18),U=a(16),A=function(){function e(t){var a=t.baseUrl,n=t.headers,i=void 0===n?{}:n;Object(D.a)(this,e),this._baseUrl=a,this._headers=i}return Object(E.a)(e,[{key:"fetchData",value:function(e){var t=e.relativePathFromBase,a=e.method,n=void 0===a?"GET":a,i=e.additionalHeaderProps,r=void 0===i?{}:i,c=e.body,o=void 0===c?null:c,s={method:n,headers:Object(l.a)(Object(l.a)({},this._headers),r)};null!==o&&(s.body=o);var u="".concat(this._baseUrl,"/").concat(t);return fetch(u,s).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}}]),e}(),I=new(function(e){Object(T.a)(a,e);var t=Object(U.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"getInitialCards",value:function(){return this.fetchData({relativePathFromBase:"cards"})}},{key:"getUserProfile",value:function(){return this.fetchData({relativePathFromBase:"users/me"})}},{key:"createCard",value:function(e,t){return this.fetchData({relativePathFromBase:"cards",method:"POST",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}},{key:"updateUserProfile",value:function(e,t){return this.fetchData({relativePathFromBase:"users/me",method:"PATCH",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}},{key:"deleteCard",value:function(e){return this.fetchData({relativePathFromBase:"cards/".concat(e),method:"DELETE"})}},{key:"updateUserAvatar",value:function(e){return this.fetchData({relativePathFromBase:"users/me/avatar",method:"PATCH",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}},{key:"updateCardLikes",value:function(e,t){return this.fetchData({relativePathFromBase:"cards/likes/".concat(e),method:t?"PUT":"DELETE"})}}]),a}(A))({baseUrl:"https://around.nomoreparties.co/v1/group-8",headers:{authorization:"f9c51bc0-ecec-42b1-bdb4-bcfabdba3e4f"}}),F=new(function(e){Object(T.a)(a,e);var t=Object(U.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"signup",value:function(e,t){return this.fetchData({relativePathFromBase:"signup",method:"POST",body:JSON.stringify({email:e,password:t})})}},{key:"signin",value:function(e,t){return this.fetchData({relativePathFromBase:"signin",method:"POST",body:JSON.stringify({email:e,password:t})})}},{key:"getEmail",value:function(e){return this.fetchData({relativePathFromBase:"users/me",additionalHeaderProps:{Authorization:"Bearer ".concat(e)}})}}]),a}(A))({baseUrl:"https://register.nomoreparties.co",headers:{"Content-Type":"application/json"}}),R=a.p+"static/media/profile-avatar.5a8c9959.jpg";var H=function(e){var t=e.name,a=e.title,n=e.submitBtnText,r=e.onRegisterOrLogin,c=e.redirectionInfo,o=e.isRegisteringOrLoggingIn,s=i.a.useState(""),l=Object(u.a)(s,2),d=l[0],m=l[1],j=i.a.useState(""),p=Object(u.a)(j,2),f=p[0],_=p[1],h=i.a.useState({}),g=Object(u.a)(h,2),O=g[0],v=g[1],x="user-email",C="user-password",k=N(O,x,!0),P=N(O,C,!0),w=O.hasOwnProperty(x)||O.hasOwnProperty(C)||o||""===d.trim()||""===f.trim(),L="project-form__submit-btn project-form__submit-btn_type_".concat(t)+(w?" project-form__submit-btn_disabled":"");function B(e){v(S(O,e))}function D(e){var t=e.target;switch(t.name){case x:m(t.value);break;case C:_(t.value)}B(t)}function E(e){B(e.target)}return Object(b.jsxs)("main",{className:"project-reg-and-login-form-container",children:[Object(b.jsxs)(y,{name:t,title:a,submitBtnText:n,submitBtnClassName:L,isSubmitBtnDisabled:w,onSubmit:function(e){e.preventDefault(),r(d,f)},children:[Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_user-reg-and-login",children:[Object(b.jsx)("input",{type:"email","aria-label":"Email",name:x,className:"project-form__input project-form__input_type_user-reg-and-login-field",placeholder:"Email",value:d,onChange:D,onBlur:E,required:!0}),Object(b.jsx)("p",{className:k,children:O[x]})]}),Object(b.jsxs)("div",{className:"project-form__field-wrapper project-form__field-wrapper_form_user-reg-and-login",children:[Object(b.jsx)("input",{type:"password","aria-label":"Password",name:C,className:"project-form__input project-form__input_type_user-reg-and-login-field",placeholder:"Password",value:f,onChange:D,onBlur:E,required:!0}),Object(b.jsx)("p",{className:P,children:O[C]})]})]}),Object(b.jsx)("p",{className:"project-reg-and-login-form-container__redirection-info",children:c})]})};var q=function(e){var t=e.onRegister,a=e.isRegistering,n=e.onRegistrationPage;i.a.useEffect((function(){return n(!0),function(){return n(!1)}}),[]);var r=Object(b.jsxs)(b.Fragment,{children:["Already a member? Log in "," ",Object(b.jsx)(o.b,{to:"/signin",className:"project-reg-and-login-form-container__link",children:"here"}),"!"]});return Object(b.jsx)(H,{name:"user-reg-and-login",title:"Sign up",submitBtnText:a?"Signing up":"Sign up",redirectionInfo:r,isRegisteringOrLoggingIn:a,onRegisterOrLogin:t})};var J=function(e){var t=e.iconType,a=e.description,n=e.isOpen,i=e.onClose;return Object(b.jsx)(v,{name:"registration",isOpen:n,onClose:i,children:Object(b.jsxs)("div",{className:"info-tooltip",children:[Object(b.jsx)("div",{className:"info-tooltip__icon info-tooltip__icon_type_".concat(t)}),Object(b.jsx)("p",{className:"info-tooltip__description",children:a})]})})};var M=function(e){var t=e.isLoggingIn,a=e.onLogin,n=e.onLoginPage;i.a.useEffect((function(){return n(!0),function(){return n(!1)}}),[]);var r=Object(b.jsxs)(b.Fragment,{children:["Not a member yet? Sign up "," ",Object(b.jsx)(o.b,{to:"/signup",className:"project-reg-and-login-form-container__link",children:"here"}),"!"]});return Object(b.jsx)(H,{name:"user-reg-and-login",title:"Log in",submitBtnText:t?"Logging in":"Log in",isRegisteringOrLoggingIn:t,redirectionInfo:r,onRegisterOrLogin:a})};var z=function(e){var t=e.Component,a=Object(j.a)(e,["Component"]),n=a.path,i=a.isLoggedIn;return Object(b.jsx)(d.b,{path:n,children:function(){return i?Object(b.jsx)(t,Object(l.a)({},a)):Object(b.jsx)(d.a,{to:"/signin"})}})};var Y=function(){var e=i.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],r=i.a.useState(!1),c=Object(u.a)(r,2),o=c[0],j=c[1],p=i.a.useState(!1),f=Object(u.a)(p,2),h=f[0],v=f[1],S=i.a.useState({_id:null,link:"#",name:""}),N=Object(u.a)(S,2),y=N[0],k=N[1],D=i.a.useState({name:"Jacques Cousteau",about:"Explorer",avatar:R,_id:null}),E=Object(u.a)(D,2),T=E[0],U=E[1],A=i.a.useState([]),H=Object(u.a)(A,2),Y=H[0],G=H[1],V=i.a.useState(null),K=Object(u.a)(V,2),Q=K[0],W=K[1],X=i.a.useState(!1),Z=Object(u.a)(X,2),$=Z[0],ee=Z[1],te=i.a.useState(!1),ae=Object(u.a)(te,2),ne=ae[0],ie=ae[1],re=i.a.useState(!1),ce=Object(u.a)(re,2),oe=ce[0],se=ce[1],le=i.a.useState(!1),ue=Object(u.a)(le,2),de=ue[0],me=ue[1],je=i.a.useState(""),pe=Object(u.a)(je,2),be=pe[0],fe=pe[1],_e=i.a.useState(!1),he=Object(u.a)(_e,2),ge=he[0],Oe=he[1],ve=i.a.useState(!1),xe=Object(u.a)(ve,2),Ce=xe[0],Se=xe[1],Ne=i.a.useState(!1),ye=Object(u.a)(Ne,2),ke=ye[0],Pe=ye[1],we=i.a.useState(!1),Le=Object(u.a)(we,2),Be=Le[0],De=Le[1],Ee=i.a.useState(!1),Te=Object(u.a)(Ee,2),Ue=Te[0],Ae=Te[1],Ie=i.a.useState(!1),Fe=Object(u.a)(Ie,2),Re=Fe[0],He=Fe[1],qe=i.a.useState(!1),Je=Object(u.a)(qe,2),Me=Je[0],ze=Je[1],Ye=h||a||o||Q||y._id||Ce||ge,Ge=Object(d.g)();function Ve(){v(!1),n(!1),j(!1),W(null),k(Object(l.a)(Object(l.a)({},y),{},{_id:null})),Oe(!1),Se(!1)}function Ke(e){"Escape"===e.key&&Ve()}function Qe(e,t){return Re?Object(b.jsx)(d.a,{to:"/"}):Object(b.jsx)(e,Object(l.a)({},t))}return i.a.useEffect((function(){Ye?document.addEventListener("keydown",Ke):document.removeEventListener("keydown",Ke)}),[Ye]),i.a.useEffect((function(){I.getUserProfile().then(U).catch(C)}),[]),i.a.useEffect((function(){I.getInitialCards().then(G).catch(C)}),[]),i.a.useEffect((function(){var e=localStorage.getItem("jwt");void 0!=e&&(He(!0),F.getEmail(e).then((function(e){var t=e.data.email;return fe(t)})).catch(C))}),[]),Object(b.jsx)(m.Provider,{value:T,children:Object(b.jsxs)("div",{className:"page",children:[Object(b.jsx)(_,{isUserLoggedIn:Re,userEmail:be,isUserOnLoginPage:Me,isUserOnRegistrationPage:Be,onSignOut:function(){localStorage.removeItem("jwt"),He(!1),fe(""),Ge.push("/signin")}}),Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{path:"/signin",children:Qe(M,{onLogin:function(e,t){Ae(!0),F.signin(e,t).then((function(t){var a=t.token;localStorage.setItem("jwt",a),fe(e),He(!0),Ge.push("/")})).catch((function(e){C(e)})).finally((function(){return Ae(!1)}))},isLoggingIn:Ue,onLoginPage:ze})}),Object(b.jsx)(d.b,{path:"/signup",children:Qe(q,{onRegister:function(e,t){Pe(!0),F.signup(e,t).then((function(e){Se(!0),Ge.push("/signin")})).catch((function(e){C(e),Oe(!0)})).finally((function(){return Pe(!1)}))},isRegistering:ke,onRegistrationPage:De})}),Object(b.jsx)(z,{Component:g,path:"/",isLoggedIn:Re,onEditAvatar:function(){v(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){j(!0)},onCardDelete:function(e){W(e)},onCardSelect:function(e,t,a){k({_id:e,name:t,link:a})},onCardLike:function(e,t){I.updateCardLikes(e,!t).then((function(t){var a=Y.map((function(a){return a._id===e?t:a}));G(a)})).catch(C)},cards:Y})]}),Object(b.jsx)(O,{}),Re&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(P,{isOpen:a,onClose:Ve,onUpdateUser:function(e,t){ie(!0),I.updateUserProfile(e,t).then(U).catch(C).finally((function(){Ve(),ie(!1)}))},isUpdatingProfile:ne}),Object(b.jsx)(L,{isOpen:o,onClose:Ve,onAddPlace:function(e,t){se(!0),I.createCard(e,t).then((function(e){return G([e].concat(Object(s.a)(Y)))})).catch(C).finally((function(){Ve(),se(!1)}))},isCreatingPlace:oe}),Object(b.jsx)(B,{isOpen:null!==Q,onClose:Ve,onConfirmation:function(){me(!0),I.deleteCard(Q).then((function(e){console.log("returned:",e);var t=Y.filter((function(e){return e._id!==Q}));G(t)})).catch(C).finally((function(){Ve(),me(!1)}))},isDeletingAfterConfirming:de}),Object(b.jsx)(w,{isOpen:h,onClose:Ve,onUpdateAvatar:function(e){ee(!0),I.updateUserAvatar(e).then(U).catch(C).finally((function(){Ve(),ee(!1)}))},isUpdatingAvatar:$}),Object(b.jsx)(x,{card:y,onClose:Ve})]}),Object(b.jsx)(J,{iconType:"success",description:"Success! You have now been registered.",isOpen:Ce,onClose:Ve}),Object(b.jsx)(J,{iconType:"error",description:"Oops, something went wrong! Please try again.",isOpen:ge,onClose:Ve})]})})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),r(e),c(e)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(o.a,{basename:"/iwterry/react-around-auth",children:Object(b.jsx)(Y,{})})}),document.getElementById("root")),G()}},[[38,1,2]]]);
//# sourceMappingURL=main.10ea3ab3.chunk.js.map